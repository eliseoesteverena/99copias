<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dashboard</title>
  
  <!-- Estilos -->
  <link rel="stylesheet" href="/template/styles/template.css">
  <link rel="stylesheet" href="/style.css">
</head>
<body>
  <div id="app"></div>

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2.39.3/dist/umd/supabase.js"></script>
  <script type="module">
    import { supabase } from './config.js';
    import { TemplateManager } from './template/core/template-manager.js';
    import { AuthIntegration } from './template/core/auth-integration.js';
    import { createDefaultConfig } from './template/config/default-config.js';

    // Inicializar autenticación
    const auth = new AuthIntegration(supabase);
    const userData = await auth.init();

    if (!userData) {
      // auth.init() ya redirige al login si no hay sesión
      throw new Error('No authenticated');
    }

    // Configurar template con página actual
    const config = createDefaultConfig(window.location.pathname);
    
    // Marcar item activo del sidebar
    const activeItem = config.sidebar.items.find(item => 
      item.href === window.location.pathname
    );
    if (activeItem) {
      activeItem.active = true;
    }

    // Actualizar título dinámico
    config.topBar.title.text = 'Dashboard';

    // Inicializar template
    const template = new TemplateManager(config, auth);
    await template.init(document.getElementById('app'));

    // --- TU CÓDIGO ESPECÍFICO DEL DASHBOARD ---
    const mainContent = document.getElementById('main-content');
    
    // Aquí agregas tu contenido específico usando mount.js
    import { el, mount } from './mount.js';
    
    mount(mainContent, 'div.container', { class: 'p-6' }, [
      el('h1.text-3xl.font-bold.mb-4', {}, 'Bienvenido al Dashboard'),
      el('div.grid.grid-cols-1.md:grid-cols-3.gap-4', {}, [
        el('div.bg-white.p-6.rounded-lg.border', {}, [
          el('h3.text-lg.font-semibold.mb-2', {}, 'Total Ventas'),
          el('p.text-3xl.font-bold.text-primary', {}, '$12,345')
        ]),
        el('div.bg-white.p-6.rounded-lg.border', {}, [
          el('h3.text-lg.font-semibold.mb-2', {}, 'Clientes'),
          el('p.text-3xl.font-bold.text-primary', {}, '234')
        ]),
        el('div.bg-white.p-6.rounded-lg.border', {}, [
          el('h3.text-lg.font-semibold.mb-2', {}, 'Trabajos Activos'),
          el('p.text-3xl.font-bold.text-primary', {}, '18')
        ])
      ])
    ]);
  </script>
</body>
</html>


<!-- 
<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Dash</title>

  <link rel="stylesheet" href="style.css">

</head>

<body>
  
  <main class="container py-8">
  <div class="max-w-xl mx-auto bg-white border rounded-lg p-6">
    
    <header class="text-center mb-8">
      <h1 class="text-3xl font-bold mb-2">¡Bienvenido al Dashboard!</h1>
      <p class="text-gray-500">Has accedido correctamente a tu panel de control.</p>
    </header>
    
    <section class="bg-gray-50 rounded-md p-4 mb-8 border">
      <h2 class="text-lg font-semibold mb-3">Información de la cuenta</h2>
      <div class="grid grid-cols-1 gap-2">
        <p class="mb-0">
          <span class="font-medium">Email:</span> 
          <span id="userEmail" class="text-gray-700 italic">Cargando...</span>
        </p>
        <p class="mb-0">
          <span class="font-medium">ID de Usuario:</span> 
          <span id="userId" class="text-sm text-gray-500">Cargando...</span>
        </p>
      </div>
    </section>
    
    <div class="text-center">
      <button id="logoutBtn" class="w-full md:w-auto">
        Cerrar Sesión
      </button>
    </div>
    
  </div>
</main>

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2.39.3/dist/umd/supabase.js"></script>
  <script src="config.js"></script>
  <script src="dashboard.js"></script>

</body>

</html>
-->